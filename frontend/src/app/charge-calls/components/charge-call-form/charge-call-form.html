<h2><strong>Formulaire pour appel de charges</strong></h2>
<hr>

<div class="p-4">
  <input
    type="text"
    [(ngModel)]="filterText"
    (input)="filterByPerson()"
    placeholder="Filtrer par nom ou email"
    class="border p-2 rounded w-full mb-4"
  />

  <table class="w-full border-collapse">
    <thead>
      <tr class="border-b">
        <th class="text-left"></th>
        <th class="text-left">Copropriétaire</th>
        <th class="text-left">Email</th>
        <th class="text-left">Montant</th>
        <th class="text-left">Date de l'AG</th>
        <th class="text-left">Résolution</th>
        <th class="text-left">Date appel de charges</th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="let cl of filteredChargeLines"
        [class.bg-gray-100]="isSelected(cl.id!)"
        class="border-b"
      >
        <td>
          <input
            type="checkbox"
            [checked]="isSelected(cl.id!)"
            (change)="toggleSelection(cl.id!)"
          />
        </td>
        <td>{{ cl.person_first_name }} {{ cl.person_last_name }}</td>
        <td>{{ cl.person_email }}</td>
        <td>{{ cl.amount }} euros</td>
        <td>{{ cl.ag_minutes_date | date: 'shortDate' }}</td>
        <td>{{ cl.ag_resolution_title }}</td>
        <td>{{ cl.call_date | date: 'shortDate' }}</td>
      </tr>
    </tbody>
  </table>

  <div class="mb-4">
    <label class="block mb-1">Date: </label>
    <input type="date" id="date" [value]="today" class="w-full border border-gray-300 rounded-md px-3 py-2" />
  </div>

  <button
  class="m-4 whitespace-nowrap flex-1 text-black hover:text-orange-300 bg-zinc-100 px-3 py-2 rounded-md text-sm font-medium text-center"

  (click)="createChargeCall()"
    [disabled]="selectedChargeLineIds.size === 0"
  >
    Générer un appel de charges à partir des lignes sélectionnées.
  </button>
</div>
